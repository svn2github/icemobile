<?xml version='1.0' encoding='UTF-8' ?>

<!--
  ~ Copyright 2004-2014 ICEsoft Technologies Canada Corp.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the
  ~ License. You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an "AS
  ~ IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
  ~ express or implied. See the License for the specific language
  ~ governing permissions and limitations under the License.
  -->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:icecore="http://www.icefaces.org/icefaces/core"
	xmlns:mobi="http://www.icesoft.com/icefaces/mobile/component">
	<h:head>
		<title>mobi:ajax Tests</title>
	</h:head>
	<h:body>
		<h1>mobi:ajax Tests</h1>
	    <hr />
		<h3>Execute Tests</h3>
	<HR/>
  		<h:panelGroup style="padding:10px;">
  			<h4>execute='@all', render='@all' Test</h4>
			<h:form id="form1e">

				<h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Click 1st (Reset values)" /> <br/>
		
	 	        <h:commandButton id="fAjax" value="Click 2nd (f:ajax)" >
					<f:ajax execute="@all" render="@all" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

		       <mobi:commandButton id="mobiAjax" value="Click 3rd (mobi:ajax)" >
					<mobi:ajax execute="@all" render="@all" listener="${ajaxTestBean.mobiAjaxEventListener}"/>
				</mobi:commandButton>

				<h4>Results:</h4>
				Expected Status = fAjax mobiAjax, Actual = <h:outputText id="statusMsg" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected A = 2, Actual = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 2, Actual = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /> <br/>
			</h:form>
			<h:form id="form1eB">				   
				Expected C = 0, Actual = <h:inputText id="valueC" value="${ajaxTestBean.valueC}" />
			</h:form>	
		</h:panelGroup>

	<HR/>
  		<h:panelGroup style="padding:10px;">
  			<h4>execute='@form', render='@all' Test</h4>
			<h:form id="form2e">

				<h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Click 1st (Reset values)" /> <br/>
		
	 	        <h:commandButton id="fAjax" value="Click 2nd (f:ajax)" >
					<f:ajax execute="@form" render="@all" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

		       <mobi:commandButton id="mobiAjax" value="Click 3rd (mobi:ajax)" >
					<mobi:ajax execute="@form" render="@all" listener="${ajaxTestBean.mobiAjaxEventListener}"/>
				</mobi:commandButton>

				<h4>Results:</h4>
				Expected Status = fAjax mobiAjax, Actual = <h:outputText id="statusMsg" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected A = 2, Actual = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 2, Actual = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /> <br/>
			</h:form>
			<h:form id="form2eB">				   
				Expected C = 0, Actual = <h:inputText id="valueC" value="${ajaxTestBean.valueC}" />
			</h:form>	
		</h:panelGroup>

	<HR/>
  		<h:panelGroup style="padding:10px;">
  			<h4>execute='@none', render='@all' Test</h4>
			<h:form id="form3e">

				<h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Click 1st (Reset values)" /> <br/>
		
	 	        <h:commandButton id="fAjax" value="Click 2nd (f:ajax)" >
					<f:ajax execute="@none" render="@all" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

		       <mobi:commandButton id="mobiAjax" value="Click 3rd (mobi:ajax)" >
					<mobi:ajax execute="@none" render="@all" listener="${ajaxTestBean.mobiAjaxEventListener}"/>
				</mobi:commandButton>

				<h4>Results:</h4>
				Expected Status = , Actual = <h:outputText id="statusMsg" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected A = 0, Actual = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 0, Actual = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /> <br/>
			</h:form>
			<h:form id="form3eB">				   
				Expected C = 0, Actual = <h:inputText id="valueC" value="${ajaxTestBean.valueC}" />
			</h:form>	
		</h:panelGroup>

	<HR/>
  		<h:panelGroup style="padding:10px;">
  			<h4>execute='@this', render='@all' Test</h4>
			<h:form id="form4e">

				<h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Click 1st (Reset values)" /> <br/>
		
	 	        <h:commandButton id="fAjax" value="Click 2nd (f:ajax)" >
					<f:ajax execute="@this" render="@all" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

		       <mobi:commandButton id="mobiAjax" value="Click 3rd (mobi:ajax)" >
					<mobi:ajax execute="@this" render="@all" listener="${ajaxTestBean.mobiAjaxEventListener}"/>
				</mobi:commandButton>

				<h4>Results:</h4>
				Expected Status = fAjax mobiAjax, Actual = <h:outputText id="statusMsg" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected A = 0, Actual = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 0, Actual = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /> <br/>
			</h:form>
			<h:form id="form4eB">				   
				Expected C = 0, Actual = <h:inputText id="valueC" value="${ajaxTestBean.valueC}" />
			</h:form>	
		</h:panelGroup>

	<HR/>
  		<h:panelGroup style="padding:10px;">
  			<h4>execute='@this valueB', render='@all' Test</h4>
			<h:form id="form5e">

				<h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Click 1st (Reset values)" /> <br/>
		
	 	        <h:commandButton id="fAjax" value="Click 2nd (f:ajax)" >
					<f:ajax execute="valueB" render="@all" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

		       <mobi:commandButton id="mobiAjax" value="Click 3rd (mobi:ajax)" >
					<mobi:ajax execute="valueB" render="@all" listener="${ajaxTestBean.mobiAjaxEventListener}"/>
				</mobi:commandButton>

				<h4>Results:</h4>
				Expected Status = fAjax mobiAjax, Actual = <h:outputText id="statusMsg" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected A = 0, Actual = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 2, Actual = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /> <br/>
			</h:form>
			<h:form id="form5eB">				   
				Expected C = 0, Actual = <h:inputText id="valueC" value="${ajaxTestBean.valueC}" />
			</h:form>	
		</h:panelGroup>

	<HR/>
  		<h:panelGroup style="padding:10px;">
  			<h4>execute='@this valueB valueA', render='@all' Test</h4>
			<h:form id="form6e">

				<h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Click 1st (Reset values)" /> <br/>
		
	 	        <h:commandButton id="fAjax" value="Click 2nd (f:ajax)" >
					<f:ajax execute="valueB valueA" render="@all" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

		       <mobi:commandButton id="mobiAjax" value="Click 3rd (mobi:ajax)" >
					<mobi:ajax execute="valueB valueA" render="@all" listener="${ajaxTestBean.mobiAjaxEventListener}"/>
				</mobi:commandButton>

				<h4>Results:</h4>
				Expected Status = fAjax mobiAjax, Actual = <h:outputText id="statusMsg" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected A = 2, Actual = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 2, Actual = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /> <br/>
			</h:form>
			<h:form id="form6eB">				   
				Expected C = 0, Actual = <h:inputText id="valueC" value="${ajaxTestBean.valueC}" />
			</h:form>	
		</h:panelGroup>


    <HR />
		
		<h2>Render Tests</h2>

	<HR/>
  		<h:panelGroup style="padding:10px;">
  			<h4>execute='@all', render='@form' Test</h4>
			<h:form id="form1r">

				<h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Click 1st (Reset values)" /> <br/>
		
	 	        <h:commandButton id="fAjax" value="Click 2nd (f:ajax)" >
					<f:ajax execute="@all" render="@form" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

		       <mobi:commandButton id="mobiAjax" value="Click 3rd (mobi:ajax)" >
					<mobi:ajax execute="@all" render="@form" listener="${ajaxTestBean.mobiAjaxEventListener}"/>
				</mobi:commandButton>

				<h4>Results:</h4>
				Expected Status = fAjax mobiAjax, Actual = <h:outputText id="statusMsg" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected A = 2, Actual = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 2, Actual = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /> <br/>
			</h:form>
			<h:form id="form1rB">				   
				Expected C = 0, Actual = <h:inputText id="valueC" value="${ajaxTestBean.valueC}" />
			</h:form>	
		</h:panelGroup>

	<HR/>
  		<h:panelGroup style="padding:10px;">
  			<h4>execute='@all', render='statusMsg' Test</h4>
			<h:form id="form2r">

				<h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Click 1st (Reset values)" /> <br/>
		
	 	        <h:commandButton id="fAjax" value="Click 2nd (f:ajax)" >
					<f:ajax execute="@all" render="statusMsg" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

		       <mobi:commandButton id="mobiAjax" value="Click 3rd (mobi:ajax)"  >
					<mobi:ajax execute="@all" render="statusMsg" listener="${ajaxTestBean.mobiAjaxEventListener}" />
				</mobi:commandButton>

				<h4>Results:</h4>
				Expected Status = fAjax mobiAjax, Actual = <h:outputText id="statusMsg" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected A = 0, Actual = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 0, Actual = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /> <br/>
			</h:form>
			<h:form id="form2rB">				   
				Expected C = 0, Actual = <h:inputText id="valueC" value="${ajaxTestBean.valueC}" />
			</h:form>	
		</h:panelGroup>

	<HR/>
  		<h:panelGroup style="padding:10px;">
  			<h4>execute='@all', render='@none' Test</h4>
			<h:form id="form3r">

				<h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Click 1st (Reset values)" /> <br/>
		
	 	        <h:commandButton id="fAjax" value="Click 2nd (f:ajax)" >
					<f:ajax event="action" execute="@all" render="@none" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

		       <mobi:commandButton id="mobiAjax" value="Click 3rd (mobi:ajax)" >
					<mobi:ajax execute="@all" render="@none" listener="${ajaxTestBean.mobiAjaxEventListener}" />
				</mobi:commandButton>

				<h4>Results:</h4>
				Expected Status = , Actual = <h:outputText id="statusMsg" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected A = 0, Actual = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 0, Actual = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /> <br/> <br />

	 	        <h:commandButton id="dButton" value="Click 4th (verify execute)" >
					<f:ajax event="action" execute="@none" render="status2 valueA2 valueB2" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

				<h4>Results 2:</h4>
				Expected Status = fAjax mobiAjax, Actual = <h:outputText id="status2" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected A = 4, Actual = <h:inputText id="valueA2" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 4, Actual = <h:inputText id="valueB2" value="${ajaxTestBean.valueB}" /> <br/>

			</h:form>
					
		</h:panelGroup>


	<HR/>
  		<h:panelGroup style="padding:10px;">
  			<h4>execute='@all', render='statusMsg valueB' Test</h4>
			<h:form id="form4r">

				<h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Click 1st (Reset values)" /> <br/>
		
	 	        <h:commandButton id="fAjax" value="Click 2nd (f:ajax)" >
					<f:ajax execute="@all" render="statusMsg valueB" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

		       <mobi:commandButton id="mobiAjax" value="Click 3rd (mobi:ajax)"  >
					<mobi:ajax execute="@all" render="statusMsg valueB" listener="${ajaxTestBean.mobiAjaxEventListener}" />
				</mobi:commandButton>

				<h4>Results:</h4>
				Expected Status = fAjax mobiAjax, Actual = <h:outputText id="statusMsg" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected A = 0, Actual = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 2, Actual = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /> <br/>
			</h:form>
			<h:form id="form4rB">				   
				Expected C = 0, Actual = <h:inputText id="valueC" value="${ajaxTestBean.valueC}" />
			</h:form>	
		</h:panelGroup>

	<HR/>
  		<h:panelGroup style="padding:10px;">
  			<h4>execute='@all', render='form4rB' Test</h4>

			<h:form id="form5r">

				<h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Click 1st (Reset values)" /> <br/>
		
	 	        <h:commandButton id="fAjax" value="Click 2nd (f:ajax)" >
					<f:ajax execute="@all" render=":form5rB" listener="${ajaxTestBean.fAjaxEventListener}" />
				</h:commandButton>

		       <mobi:commandButton id="mobiAjax" value="Click 3rd (mobi:ajax)"  >
					<mobi:ajax execute="@all" render=":form5rB" listener="${ajaxTestBean.mobiAjaxEventListener}" />
				</mobi:commandButton>

				<h4>Results:</h4>
				Expected A = 0, Actual = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /> <br/>
				Expected B = 0, Actual = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /> <br/>
			</h:form>
			<h:form id="form5rB">
				Expected Status = fAjax mobiAjax, Actual = <h:outputText id="statusMsg" value="${ajaxTestBean.statusMsg}" /> <br />
				Expected C = 0, Actual = <h:inputText id="valueC" value="${ajaxTestBean.valueC}" />
			</h:form>	

		</h:panelGroup>		

<hr />


  		<h:panelGroup style="padding:30px;">
  		<h3>onStart JavaScript Callback Test - Blocked Submit</h3>
			<h:form id="form1js">
   			       <h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Reset values" />
   			       <mobi:commandButton id="activate" value="Activate! (onStart, return=false)" >
					<mobi:ajax event="click" onStart="alert('onStart called!'); return false;" />
				</mobi:commandButton>
				<h3>Results:</h3>
				<ul>
 				   <li>Alert dialog displayed with "onStart called!". </li>
				   <li>Expected value A = 0, Actual value = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /></li>
				   <li>Expected value B = 0, Actual value = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /></li>
				</ul>  
			</h:form>
		</h:panelGroup>

		<hr />

  		<h:panelGroup style="padding:30px;">
  		<h3>onStart JavaScript Callback Test - Submit Enabled</h3>
			<h:form id="form2js">
   			       <h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Reset values" />
   			       <mobi:commandButton id="activate" value="Activate! (onStart, return=true)" >
					<mobi:ajax event="click" onStart="alert('onStart called!'); return true;" />
				</mobi:commandButton>
				<h3>Results:</h3>
				<ul>
					<li>Alert dialog displayed with "onStart called!". </li>
				   <li>Expected value A = 1, Actual value = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /></li>
				   <li>Expected value B = 1, Actual value = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /></li>
				</ul>  
			</h:form>
		</h:panelGroup>

		<hr />

  		<h:panelGroup style="padding:30px;">
  		<h3>onComplete JavaScript Callback Test</h3>
			<h:form id="form3js">
   			       <h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Reset values" />
   			       <mobi:commandButton id="activate" value="Activate! (onComplete)" >
					<mobi:ajax event="click" onComplete="alert('onComplete called!');" />
				</mobi:commandButton>
				<h3>Results:</h3>
				<ul>
				    <li>Alert dialog displayed with "onComplete called!". </li>
				   <li>Expected value A = 1, Actual value = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /></li>
				   <li>Expected value B = 1, Actual value = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /></li>
				</ul>  
			</h:form>
		</h:panelGroup>

		<hr />

  		<h:panelGroup style="padding:30px;">
  		<h3>onSuccess JavaScript Callback Test</h3>
			<h:form id="form4js">
   			       <h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Reset values" />
   			       <mobi:commandButton id="activate" value="Activate! (onSuccess)" >
					<mobi:ajax event="click" onSuccess="alert('onSuccess called!');" />
				</mobi:commandButton>
				<h3>Results:</h3>
				<ul>
				    <li>Alert dialog displayed with "onSuccess called!". </li>
				   <li>Expected value A = 1, Actual value = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /></li>
				   <li>Expected value B = 1, Actual value = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /></li>
				</ul>  
			</h:form>
		</h:panelGroup>

		<hr />

  		<h:panelGroup style="padding:30px;">
  		<h3>onError JavaScript Callback Test</h3>
			<h:form id="form5js">
   			       <h:commandButton id="reset" actionListener="${ajaxTestBean.clear}" value="Reset values" />
					<p>Shutdown server, then click "Activate! button below.</p>						
   			       <mobi:commandButton id="activate" value="Activate! (onError)" >
					<mobi:ajax event="click" onError="alert('onError called!');" />
				</mobi:commandButton>
				<h3>Results:</h3>
				<ul>
				    <li>Alert dialog displayed with "onError called!". </li>
				   <li>Expected value A = 0, Actual value = <h:inputText id="valueA" value="${ajaxTestBean.valueA}" /></li>
				   <li>Expected value B = 0, Actual value = <h:inputText id="valueB" value="${ajaxTestBean.valueB}" /></li>
				</ul>  
			</h:form>
		</h:panelGroup>

   <li><a href="../ajaxComponents.html">index page</a> </li>
	</h:body>
</html>