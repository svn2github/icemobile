<!--
  ~ Copyright 2004-2013 ICEsoft Technologies Canada Corp.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the
  ~ License. You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an "AS
  ~ IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
  ~ express or implied. See the License for the specific language
  ~ governing permissions and limitations under the License.
  -->

<html>
<head>
	<title>ICEmobile Camera</title>
	<meta name="viewport" content="width=device-width, initial-scale=1"> 

	<link rel="stylesheet" href="jquery.mobile-1.3.1/jquery.mobile-1.3.1.min.css" />
	<script type="text/javascript" src="./jquery/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="./jquery.mobile-1.3.1/jquery.mobile-1.3.1.min.js"></script>
	<script type="text/javascript" src="../icemobile-resources/javascript/icemobile.js"></script>
    <style>
    .ui-header .ui-title {
        margin-right: 10%;
        margin-left: 10%;
    }
    .mobi-container .mobi-stock {
        display: none;
    }
    .mobi-stock .mobi-container {
        display: none;
    }
    .imageout img {
        height: 80px;
        width: 80px;
        padding: 10px;
    }
    .thumb {
        height: 90px;
        line-height : 90px;
    }
    .thumb img {
        float:right;
    }
    </style>
</head>
<body>
    <script>
    //disable feeble jquerymobile hash change detection
    //may be possible to remove with jquery mobile update
    $.mobile.hashListeningEnabled = false;

    function handleCam(event)  {
        var text = event.value;
        if (event.response)  {
            var theResponse = JSON.parse(event.response);
            $("#images").append("<img src='" + theResponse.path + "'>");
        }
        $("#output").html(text);
        if (event.preview)  {
            $("#thumb").attr("src", event.preview);
        }
    }
    </script>
	<div data-role="page">
		<div data-role="header">
			<h1>ICEmobile Camera</h1>
		</div>
		<div data-role="content">	
            <fieldset>
                <input id="name" name="name" type="text" placeholder="Name" value=""/>
            </fieldset>
           <a data-role="button" class="thumb" id="go" onclick="ice.mobi.camera('_cam',handleCam, {postURL:(''+window.location).match(/.*\//) + '../html5cam/'});">Camera ... <img id="thumb" ></a>
           <h2>
               <span id="output">
               </span>
               <div class="imageout" id="images">
               </div>
           </h2>
        </div>
        
	        <a href="..#icehtml" data-ajax="false">Return</a>
	        
		</div>
	</div>
</body>
</html>

